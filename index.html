<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Kodowanie i Dekodowanie+</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      background: linear-gradient(135deg, #0d0d0d, #1c1c2c, #2a0d45);
      color: #f0f0f0;
      overflow: hidden;
      transition: background 0.5s ease;
    }
    .menu, .form {
      background: #1e1e2f;
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.7);
      text-align: center;
      width: 800px;
      max-width: 95%;
      transition: opacity 0.3s ease;
      z-index: 10; /* zwiększenie z-index, żeby przyciski były klikalne */
    }
    .menu { display: block; }
    .form { display: none; }
    h2 { animation: pulse 2s infinite; }
    @keyframes pulse { 0% {opacity: 1;} 50% {opacity: 0.6;} 100% {opacity: 1;} }
    button { margin: 10px; padding: 12px 24px; border: none; border-radius: 12px; background: #6a0dad; color: white; font-size: 16px; cursor: pointer; transition: background 0.3s ease, transform 0.2s ease; z-index: 10; position: relative; }
    button:hover { background: #4b0082; transform: translateY(-3px); }
    textarea { width: 100%; height: 150px; margin: 20px 0; padding: 14px; border-radius: 12px; border: 1px solid #444; background: #2c2c3c; color: #f0f0f0; resize: none; font-size: 16px; z-index: 10; position: relative; }
    select { margin: 10px; padding: 8px; border-radius: 8px; border: 1px solid #444; background: #2c2c3c; color: #f0f0f0; z-index: 10; position: relative; }
    #output { margin-top: 20px; font-weight: bold; word-wrap: break-word; color: #d3bdf0; z-index: 10; position: relative; }
    .history { margin-top: 20px; max-height: 150px; overflow-y: auto; text-align: left; font-size: 14px; background: #2c2c3c; padding: 10px; border-radius: 10px; z-index: 10; position: relative; }
    .toast { position: fixed; bottom: 20px; right: 20px; background: #6a0dad; color: white; padding: 10px 20px; border-radius: 8px; opacity: 0; transition: opacity 0.5s ease; z-index: 10; }
    .toast.show { opacity: 1; }
    #langSelector { position: fixed; top: 10px; right: 10px; cursor: pointer; z-index: 10; }
    #languageMenu { display: none; margin-left:5px; z-index: 10; position: relative; }
    #flagIcon { width: 40px; height: auto; z-index: 10; position: relative; }
    .side-ad { position: fixed; top: 50%; transform: translateY(-50%); width: 120px; z-index: 1; }
    .left-ad { left: 10px; }
    .right-ad { right: 10px; }
  </style>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8942206493546644" crossorigin="anonymous"></script>
</head>
<body>
  <div id="langSelector">
    <img src="https://flagcdn.com/w20/pl.png" id="flagIcon" alt="PL" title="Zmień język">
    <select id="languageMenu">
      <option value="pl">Polski</option>
      <option value="en">English</option>
    </select>
  </div>

  <!-- Reklama po lewej -->
  <ins class="adsbygoogle side-ad left-ad"
       style="display:block"
       data-ad-client="ca-pub-8942206493546644"
       data-ad-slot="3054671922"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>

  <!-- Reklama po prawej -->
  <ins class="adsbygoogle side-ad right-ad"
       style="display:block"
       data-ad-client="ca-pub-8942206493546644"
       data-ad-slot="9099553137"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>

  <div class="menu" id="menu">
    <h2 id="menuTitle">Wybierz opcję</h2>
    <button id="encodeBtn" onclick="showForm('encode')">Zakoduj</button>
    <button id="decodeBtn" onclick="showForm('decode')">Rozkoduj</button>
  </div>

  <div class="form" id="form">
    <h2 id="formTitle"></h2>
    <select id="method">
      <option value="base64">Base64</option>
      <option value="rot13">ROT13</option>
      <option value="cezar">Szyfr Cezara (+3)</option>
      <option value="atbash">AtBash</option>
    </select>
    <textarea id="message" placeholder="Wpisz wiadomość..."></textarea>
    <br>
    <button id="okBtn" onclick="processMessage()">OK</button>
    <button id="copyBtn" onclick="copyResult()">Kopiuj wynik</button>
    <button id="backBtn" onclick="goBack()">Powrót</button>
    <div id="output"></div>
    <div class="history" id="history"></div>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    let mode = '';
    let historyList = [];

    const texts = {
      pl: { encode: 'Zakoduj', decode: 'Rozkoduj', messagePlaceholder: 'Wpisz wiadomość...', ok: 'OK', copy: 'Kopiuj wynik', back: 'Powrót', menuTitle: 'Wybierz opcję', titleEncode: 'Zakoduj wiadomość', titleDecode: 'Rozkoduj wiadomość'},
      en: { encode: 'Encode', decode: 'Decode', messagePlaceholder: 'Enter your message...', ok: 'OK', copy: 'Copy result', back: 'Back', menuTitle: 'Choose option', titleEncode: 'Encode message', titleDecode: 'Decode message'}
    };

    const flagIcon = document.getElementById('flagIcon');
    const languageMenu = document.getElementById('languageMenu');

    flagIcon.addEventListener('click', () => { languageMenu.style.display = languageMenu.style.display === 'none' ? 'inline' : 'none'; });

    languageMenu.addEventListener('change', () => {
      const lang = languageMenu.value;
      document.getElementById('encodeBtn').innerText = texts[lang].encode;
      document.getElementById('decodeBtn').innerText = texts[lang].decode;
      document.getElementById('menuTitle').innerText = texts[lang].menuTitle;
      document.getElementById('message').placeholder = texts[lang].messagePlaceholder;
      document.getElementById('okBtn').innerText = texts[lang].ok;
      document.getElementById('copyBtn').innerText = texts[lang].copy;
      document.getElementById('backBtn').innerText = texts[lang].back;
    });

    function showForm(selectedMode) {
      mode = selectedMode;
      document.getElementById('menu').style.display = 'none';
      document.getElementById('form').style.display = 'block';
      document.getElementById('formTitle').innerText = mode === 'encode' ? texts[languageMenu.value].titleEncode : texts[languageMenu.value].titleDecode;
      document.getElementById('output').innerText = '';
      document.getElementById('message').value = '';
    }

    function goBack() {
      document.getElementById('form').style.display = 'none';
      document.getElementById('menu').style.display = 'block';
    }

    function processMessage() {
      let msg = document.getElementById('message').value;
      let method = document.getElementById('method').value;
      let result = '';
      if (mode === 'encode') {
        if (method === 'base64') result = btoa(msg);
        else if (method === 'rot13') result = msg.replace(/[a-zA-Z]/g, c => String.fromCharCode((c<='Z'?90:122)>=c.charCodeAt(0)+13?c.charCodeAt(0)+13:c.charCodeAt(0)-13));
        else if (method === 'cezar') result = msg.replace(/[a-zA-Z]/g, c => String.fromCharCode((c<='Z'?90:122)>=c.charCodeAt(0)+3?c.charCodeAt(0)+3:c.charCodeAt(0)-23));
        else if (method === 'atbash') result = msg.replace(/[a-zA-Z]/g, c => String.fromCharCode((c<='Z'?90:122)- (c.charCodeAt(0) - (c<='Z'?65:97))));
      } else {
        if (method === 'base64') result = atob(msg);
        else if (method === 'rot13') result = msg.replace(/[a-zA-Z]/g, c => String.fromCharCode((c<='Z'?90:122)>=c.charCodeAt(0)+13?c.charCodeAt(0)+13:c.charCodeAt(0)-13));
        else if (method === 'cezar') result = msg.replace(/[a-zA-Z]/g, c => String.fromCharCode((c<='Z'?90:122)>=c.charCodeAt(0)-3?c.charCodeAt(0)-3:c.charCodeAt(0)+23));
        else if (method === 'atbash') result = msg.replace(/[a-zA-Z]/g, c => String.fromCharCode((c<='Z'?90:122)- (c.charCodeAt(0) - (c<='Z'?65:97))));
      }
      document.getElementById('output').innerText = result;
      historyList.push(result);
      document.getElementById('history').innerText = historyList.join('\n');
    }

    function copyResult() {
      const output = document.getElementById('output');
      navigator.clipboard.writeText(output.innerText);
      showToast('Skopiowano!');
    }

    function showToast(msg) {
      const toast = document.getElementById('toast');
      toast.innerText = msg;
      toast.classList.add('show');
      setTimeout(() => { toast.classList.remove('show'); }, 2000);
    }
  </script>
</body>
</html>
